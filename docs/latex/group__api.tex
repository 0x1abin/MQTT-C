\hypertarget{group__api}{}\section{A\+PI}
\label{group__api}\index{A\+PI@{A\+PI}}


Application programmer interface documentation.  


\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \{ \\*
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+U\+N\+K\+N\+O\+WN} =I\+N\+T\+\_\+\+M\+IN, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+N\+U\+L\+L\+P\+TR}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+F\+O\+R\+B\+I\+D\+D\+E\+N\+\_\+\+T\+Y\+PE}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+F\+L\+A\+GS}, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+W\+R\+O\+N\+G\+\_\+\+T\+Y\+PE}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+N\+U\+L\+L\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+ID}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+N\+U\+L\+L\+\_\+\+W\+I\+L\+L\+\_\+\+M\+E\+S\+S\+A\+GE}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+F\+O\+R\+B\+I\+D\+D\+E\+N\+\_\+\+W\+I\+L\+L\+\_\+\+Q\+OS}, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+F\+O\+R\+B\+I\+D\+D\+E\+N\+\_\+\+F\+L\+A\+GS}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+F\+O\+R\+B\+I\+D\+D\+E\+N\+\_\+\+C\+O\+DE}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+P\+U\+B\+L\+I\+S\+H\+\_\+\+F\+O\+R\+B\+I\+D\+D\+E\+N\+\_\+\+Q\+OS}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+S\+U\+B\+S\+C\+R\+I\+B\+E\+\_\+\+T\+O\+O\+\_\+\+M\+A\+N\+Y\+\_\+\+T\+O\+P\+I\+CS}, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+A\+L\+F\+O\+R\+M\+E\+D\+\_\+\+R\+E\+S\+P\+O\+N\+SE}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+U\+N\+S\+U\+B\+S\+C\+R\+I\+B\+E\+\_\+\+T\+O\+O\+\_\+\+M\+A\+N\+Y\+\_\+\+T\+O\+P\+I\+CS}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+R\+E\+S\+P\+O\+N\+S\+E\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+T\+Y\+PE}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+N\+O\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+ED}, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+S\+E\+N\+D\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+I\+S\+\_\+\+F\+U\+LL}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+S\+O\+C\+K\+E\+T\+\_\+\+E\+R\+R\+OR}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+A\+L\+F\+O\+R\+M\+E\+D\+\_\+\+R\+E\+Q\+U\+E\+ST}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+R\+E\+C\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+T\+O\+O\+\_\+\+S\+M\+A\+LL}, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+A\+C\+K\+\_\+\+O\+F\+\_\+\+U\+N\+K\+N\+O\+WN}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+N\+O\+T\+\_\+\+I\+M\+P\+L\+E\+M\+E\+N\+T\+ED}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+R\+E\+F\+U\+S\+ED}, 
{\bfseries M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+S\+U\+B\+S\+C\+R\+I\+B\+E\+\_\+\+F\+A\+I\+L\+ED}, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+OK} = 1
 \}\begin{DoxyCompactList}\small\item\em An enumeration of error codes. Error messages can be retrieved by calling \hyperlink{group__api_ga47b62bdd24e8b05957825d2419d7c848}{mqtt\+\_\+error\+\_\+str}. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const char $\ast$ \hyperlink{group__api_ga47b62bdd24e8b05957825d2419d7c848}{mqtt\+\_\+error\+\_\+str} (enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} error)
\begin{DoxyCompactList}\small\item\em Returns an error message for error code, {\ttfamily error}. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_gab07105b049dd86a8ec39c518cf9fa4c7}{mqtt\+\_\+init} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, int sockfd, uint8\+\_\+t $\ast$sendbuf, size\+\_\+t sendbufsz, uint8\+\_\+t $\ast$recvbuf, size\+\_\+t recvbufsz, void($\ast$publish\+\_\+response\+\_\+callback)(void $\ast$$\ast$state, struct \hyperlink{structmqtt__response__publish}{mqtt\+\_\+response\+\_\+publish} $\ast$publish))
\begin{DoxyCompactList}\small\item\em Initialize an M\+Q\+TT client.

This function {\itshape must} be called before any other A\+PI function calls. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_gac8e25ff4f74aa7964b2b2ccbcfa23788}{mqtt\+\_\+connect} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, const char $\ast$client\+\_\+id, const char $\ast$will\+\_\+topic, const char $\ast$will\+\_\+message, const char $\ast$user\+\_\+name, const char $\ast$password, uint8\+\_\+t connect\+\_\+flags, uint16\+\_\+t keep\+\_\+alive)
\begin{DoxyCompactList}\small\item\em Establishes a session with the M\+Q\+TT broker. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_ga0d8fed24a799ab9b55eeb28f3cd2d0a8}{mqtt\+\_\+publish} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, const char $\ast$topic\+\_\+name, void $\ast$application\+\_\+message, size\+\_\+t application\+\_\+message\+\_\+size, uint8\+\_\+t publish\+\_\+flags)
\begin{DoxyCompactList}\small\item\em Publish an application message.

Publishes an application message to the M\+Q\+TT broker. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_gaea5da9b546f6e91eb77c9eff9c478de5}{mqtt\+\_\+subscribe} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, const char $\ast$topic\+\_\+name, int max\+\_\+qos\+\_\+level)
\begin{DoxyCompactList}\small\item\em Subscribe to a topic. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_ga08d16571dfefa690698c0cca5cca7a1d}{mqtt\+\_\+unsubscribe} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, const char $\ast$topic\+\_\+name)
\begin{DoxyCompactList}\small\item\em Unsubscribe from a topic. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_gae472795684a1d973bfb89d075d17a29e}{mqtt\+\_\+ping} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client)
\begin{DoxyCompactList}\small\item\em Ping the broker. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{group__api_ga95d9981735ab4495d3d65e8056611126}{mqtt\+\_\+disconnect} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client)
\begin{DoxyCompactList}\small\item\em Terminate the session with the M\+Q\+TT broker. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Application programmer interface documentation. 



\subsection{Enumeration Type Documentation}
\index{A\+PI@{A\+PI}!M\+Q\+T\+T\+Errors@{M\+Q\+T\+T\+Errors}}
\index{M\+Q\+T\+T\+Errors@{M\+Q\+T\+T\+Errors}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{M\+Q\+T\+T\+Errors}{MQTTErrors}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors}}\hypertarget{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{}\label{group__api_gad0c901a8d30691ed0ca17915b691b7e7}


An enumeration of error codes. Error messages can be retrieved by calling \hyperlink{group__api_ga47b62bdd24e8b05957825d2419d7c848}{mqtt\+\_\+error\+\_\+str}. 

\begin{DoxySeeAlso}{See also}
\hyperlink{group__api_ga47b62bdd24e8b05957825d2419d7c848}{mqtt\+\_\+error\+\_\+str} 
\end{DoxySeeAlso}


\subsection{Function Documentation}
\index{A\+PI@{A\+PI}!mqtt\+\_\+connect@{mqtt\+\_\+connect}}
\index{mqtt\+\_\+connect@{mqtt\+\_\+connect}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+connect(struct mqtt\+\_\+client $\ast$client, const char $\ast$client\+\_\+id, const char $\ast$will\+\_\+topic, const char $\ast$will\+\_\+message, const char $\ast$user\+\_\+name, const char $\ast$password, uint8\+\_\+t connect\+\_\+flags, uint16\+\_\+t keep\+\_\+alive)}{mqtt_connect(struct mqtt_client *client, const char *client_id, const char *will_topic, const char *will_message, const char *user_name, const char *password, uint8_t connect_flags, uint16_t keep_alive)}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+connect (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{const char $\ast$}]{client\+\_\+id, }
\item[{const char $\ast$}]{will\+\_\+topic, }
\item[{const char $\ast$}]{will\+\_\+message, }
\item[{const char $\ast$}]{user\+\_\+name, }
\item[{const char $\ast$}]{password, }
\item[{uint8\+\_\+t}]{connect\+\_\+flags, }
\item[{uint16\+\_\+t}]{keep\+\_\+alive}
\end{DoxyParamCaption}
)}\hypertarget{group__api_gac8e25ff4f74aa7964b2b2ccbcfa23788}{}\label{group__api_gac8e25ff4f74aa7964b2b2ccbcfa23788}


Establishes a session with the M\+Q\+TT broker. 

\begin{DoxyPrecond}{Precondition}
mqtt\+\_\+init must have been called.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em client\+\_\+id} & The unique name identifying the client. \\
\hline
\mbox{\tt in}  & {\em will\+\_\+topic} & The topic name of client\textquotesingle{}s {\ttfamily will\+\_\+message}. If no will message is desired set to {\ttfamily N\+U\+LL}. \\
\hline
\mbox{\tt in}  & {\em will\+\_\+message} & The application message (data) to be published in the event the client ungracefully disconnects. Set to {\ttfamily N\+U\+LL} if {\ttfamily will\+\_\+topic} is {\ttfamily N\+U\+LL}. \\
\hline
\mbox{\tt in}  & {\em user\+\_\+name} & The username to use when establishing the session with the M\+Q\+TT broker. Set to {\ttfamily N\+U\+LL} if a username is not required. \\
\hline
\mbox{\tt in}  & {\em password} & The password to use when establishing the session with the M\+Q\+TT broker. Set to {\ttfamily N\+U\+LL} if a password is not required. \\
\hline
\mbox{\tt in}  & {\em connect\+\_\+flags} & Additional \hyperlink{group__packers_gad6fa84a96a940fe4eae6ffca1a6d945f}{M\+Q\+T\+T\+Connect\+Flags} to use when establishing the connection. These flags are for forcing the session to start clean, {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+C\+L\+E\+A\+N\+\_\+\+S\+E\+S\+S\+I\+ON}, the Q\+OS level to publish the {\ttfamily will\+\_\+message} with (provided {\ttfamily will\+\_\+message} != {\ttfamily N\+U\+LL}), M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+W\+I\+L\+L\+\_\+\+Q\+O\+S\+\_\+\mbox{[}0,1,2\mbox{]}, and whether or not the broker should retain the {\ttfamily will\+\_\+message}, M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+\_\+\+W\+I\+L\+L\+\_\+\+R\+E\+T\+A\+IN. \\
\hline
\mbox{\tt in}  & {\em keep\+\_\+alive} & The keep-\/alive time in seconds. A reasonable value for this is 400 \mbox{[}seconds\mbox{]}.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+disconnect@{mqtt\+\_\+disconnect}}
\index{mqtt\+\_\+disconnect@{mqtt\+\_\+disconnect}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+disconnect(struct mqtt\+\_\+client $\ast$client)}{mqtt_disconnect(struct mqtt_client *client)}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+disconnect (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client}
\end{DoxyParamCaption}
)}\hypertarget{group__api_ga95d9981735ab4495d3d65e8056611126}{}\label{group__api_ga95d9981735ab4495d3d65e8056611126}


Terminate the session with the M\+Q\+TT broker. 

\begin{DoxyPrecond}{Precondition}
mqtt\+\_\+connect must have been called.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
To re-\/establish the session, mqtt\+\_\+connect must be called.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+error\+\_\+str@{mqtt\+\_\+error\+\_\+str}}
\index{mqtt\+\_\+error\+\_\+str@{mqtt\+\_\+error\+\_\+str}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+error\+\_\+str(enum M\+Q\+T\+T\+Errors error)}{mqtt_error_str(enum MQTTErrors error)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ mqtt\+\_\+error\+\_\+str (
\begin{DoxyParamCaption}
\item[{enum {\bf M\+Q\+T\+T\+Errors}}]{error}
\end{DoxyParamCaption}
)}\hypertarget{group__api_ga47b62bdd24e8b05957825d2419d7c848}{}\label{group__api_ga47b62bdd24e8b05957825d2419d7c848}


Returns an error message for error code, {\ttfamily error}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em error} & the error code.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The associated error message. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+init@{mqtt\+\_\+init}}
\index{mqtt\+\_\+init@{mqtt\+\_\+init}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+init(struct mqtt\+\_\+client $\ast$client, int sockfd, uint8\+\_\+t $\ast$sendbuf, size\+\_\+t sendbufsz, uint8\+\_\+t $\ast$recvbuf, size\+\_\+t recvbufsz, void($\ast$publish\+\_\+response\+\_\+callback)(void $\ast$$\ast$state, struct mqtt\+\_\+response\+\_\+publish $\ast$publish))}{mqtt_init(struct mqtt_client *client, int sockfd, uint8_t *sendbuf, size_t sendbufsz, uint8_t *recvbuf, size_t recvbufsz, void(*publish_response_callback)(void **state, struct mqtt_response_publish *publish))}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+init (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{int}]{sockfd, }
\item[{uint8\+\_\+t $\ast$}]{sendbuf, }
\item[{size\+\_\+t}]{sendbufsz, }
\item[{uint8\+\_\+t $\ast$}]{recvbuf, }
\item[{size\+\_\+t}]{recvbufsz, }
\item[{void($\ast$)(void $\ast$$\ast$state, struct {\bf mqtt\+\_\+response\+\_\+publish} $\ast$publish)}]{publish\+\_\+response\+\_\+callback}
\end{DoxyParamCaption}
)}\hypertarget{group__api_gab07105b049dd86a8ec39c518cf9fa4c7}{}\label{group__api_gab07105b049dd86a8ec39c518cf9fa4c7}


Initialize an M\+Q\+TT client.

This function {\itshape must} be called before any other A\+PI function calls. 

\begin{DoxyPrecond}{Precondition}
None.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em sockfd} & The socket file descriptor connected to the M\+Q\+TT broker. \\
\hline
\mbox{\tt in}  & {\em sendbuf} & A buffer that will be used for sending messages to the broker. \\
\hline
\mbox{\tt in}  & {\em sendbufsz} & The size of {\ttfamily sendbuf} in bytes. \\
\hline
\mbox{\tt in}  & {\em recvbuf} & A buffer that will be used for receiving messages from the broker. \\
\hline
\mbox{\tt in}  & {\em recvbufsz} & The size of {\ttfamily recvbuf} in bytes. \\
\hline
\mbox{\tt in}  & {\em publish\+\_\+response\+\_\+callback} & The callback to call whenever application messages are received from the broker.\\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
mqtt\+\_\+connect must be called.
\end{DoxyPostcond}
\begin{DoxyNote}{Note}
{\ttfamily sockfd} is a non-\/blocking T\+CP connection. 

If {\ttfamily sendbuf} fills up completely during runtime a {\ttfamily M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+S\+E\+N\+D\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+I\+S\+\_\+\+F\+U\+LL} error will be set. Similarly if {\ttfamily recvbuf} is ever to small to receive a message from the broker an M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+R\+E\+C\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+T\+O\+O\+\_\+\+S\+M\+A\+LL error will be set. 

A pointer to \hyperlink{structmqtt__client_a948d816462128ef2216c230644407f21}{mqtt\+\_\+client\+::publish\+\_\+response\+\_\+callback\+\_\+state} is always passed as the {\ttfamily state} argument to {\ttfamily publish\+\_\+response\+\_\+callback}. Note that the second argument is the \hyperlink{structmqtt__response__publish}{mqtt\+\_\+response\+\_\+publish} that was received from the broker.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+ping@{mqtt\+\_\+ping}}
\index{mqtt\+\_\+ping@{mqtt\+\_\+ping}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+ping(struct mqtt\+\_\+client $\ast$client)}{mqtt_ping(struct mqtt_client *client)}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+ping (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client}
\end{DoxyParamCaption}
)}\hypertarget{group__api_gae472795684a1d973bfb89d075d17a29e}{}\label{group__api_gae472795684a1d973bfb89d075d17a29e}


Ping the broker. 

\begin{DoxyPrecond}{Precondition}
mqtt\+\_\+connect must have been called.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+publish@{mqtt\+\_\+publish}}
\index{mqtt\+\_\+publish@{mqtt\+\_\+publish}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+publish(struct mqtt\+\_\+client $\ast$client, const char $\ast$topic\+\_\+name, void $\ast$application\+\_\+message, size\+\_\+t application\+\_\+message\+\_\+size, uint8\+\_\+t publish\+\_\+flags)}{mqtt_publish(struct mqtt_client *client, const char *topic_name, void *application_message, size_t application_message_size, uint8_t publish_flags)}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+publish (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{const char $\ast$}]{topic\+\_\+name, }
\item[{void $\ast$}]{application\+\_\+message, }
\item[{size\+\_\+t}]{application\+\_\+message\+\_\+size, }
\item[{uint8\+\_\+t}]{publish\+\_\+flags}
\end{DoxyParamCaption}
)}\hypertarget{group__api_ga0d8fed24a799ab9b55eeb28f3cd2d0a8}{}\label{group__api_ga0d8fed24a799ab9b55eeb28f3cd2d0a8}


Publish an application message.

Publishes an application message to the M\+Q\+TT broker. 

\begin{DoxyPrecond}{Precondition}
mqtt\+\_\+connect must have been called.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em topic\+\_\+name} & The name of the topic. \\
\hline
\mbox{\tt in}  & {\em application\+\_\+message} & The data to be published. \\
\hline
\mbox{\tt in}  & {\em application\+\_\+message\+\_\+size} & The size of {\ttfamily application\+\_\+message} in bytes. \\
\hline
\mbox{\tt in}  & {\em publish\+\_\+flags} & \hyperlink{group__packers_gad38a41e1c497f9bcd2477c005f280b23}{M\+Q\+T\+T\+Publish\+Flags} to be used, namely the Q\+OS level to publish at (M\+Q\+T\+T\+\_\+\+P\+U\+B\+L\+I\+S\+H\+\_\+\+Q\+O\+S\+\_\+\mbox{[}0,1,2\mbox{]}) or whether or not the broker should retain the publish (M\+Q\+T\+T\+\_\+\+P\+U\+B\+L\+I\+S\+H\+\_\+\+R\+E\+T\+A\+IN).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+subscribe@{mqtt\+\_\+subscribe}}
\index{mqtt\+\_\+subscribe@{mqtt\+\_\+subscribe}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+subscribe(struct mqtt\+\_\+client $\ast$client, const char $\ast$topic\+\_\+name, int max\+\_\+qos\+\_\+level)}{mqtt_subscribe(struct mqtt_client *client, const char *topic_name, int max_qos_level)}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+subscribe (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{const char $\ast$}]{topic\+\_\+name, }
\item[{int}]{max\+\_\+qos\+\_\+level}
\end{DoxyParamCaption}
)}\hypertarget{group__api_gaea5da9b546f6e91eb77c9eff9c478de5}{}\label{group__api_gaea5da9b546f6e91eb77c9eff9c478de5}


Subscribe to a topic. 

\begin{DoxyPrecond}{Precondition}
mqtt\+\_\+connect must have been called.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em topic\+\_\+name} & The name of the topic to subscribe to. \\
\hline
\mbox{\tt in}  & {\em max\+\_\+qos\+\_\+level} & The maximum Q\+OS level with which the broker can send application messages for this topic.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{A\+PI@{A\+PI}!mqtt\+\_\+unsubscribe@{mqtt\+\_\+unsubscribe}}
\index{mqtt\+\_\+unsubscribe@{mqtt\+\_\+unsubscribe}!A\+PI@{A\+PI}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+unsubscribe(struct mqtt\+\_\+client $\ast$client, const char $\ast$topic\+\_\+name)}{mqtt_unsubscribe(struct mqtt_client *client, const char *topic_name)}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+unsubscribe (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{const char $\ast$}]{topic\+\_\+name}
\end{DoxyParamCaption}
)}\hypertarget{group__api_ga08d16571dfefa690698c0cca5cca7a1d}{}\label{group__api_ga08d16571dfefa690698c0cca5cca7a1d}


Unsubscribe from a topic. 

\begin{DoxyPrecond}{Precondition}
mqtt\+\_\+connect must have been called.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em topic\+\_\+name} & The name of the topic to unsubscribe from.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
