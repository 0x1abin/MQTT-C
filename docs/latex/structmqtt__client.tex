\hypertarget{structmqtt__client}{}\section{mqtt\+\_\+client Struct Reference}
\label{structmqtt__client}\index{mqtt\+\_\+client@{mqtt\+\_\+client}}


An M\+Q\+TT client.  




{\ttfamily \#include $<$mqtt.\+h$>$}

\subsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{structmqtt__client_a9ba39ec6a412d49792bf5f106754eac1}{socketfd}\hypertarget{structmqtt__client_a9ba39ec6a412d49792bf5f106754eac1}{}\label{structmqtt__client_a9ba39ec6a412d49792bf5f106754eac1}

\begin{DoxyCompactList}\small\item\em The socket connecting to the M\+Q\+TT broker. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{structmqtt__client_a8b11e2b1612858ecd6656d694154698f}{pid\+\_\+lfsr}\hypertarget{structmqtt__client_a8b11e2b1612858ecd6656d694154698f}{}\label{structmqtt__client_a8b11e2b1612858ecd6656d694154698f}

\begin{DoxyCompactList}\small\item\em The L\+F\+SR state used to generate packet ID\textquotesingle{}s. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{structmqtt__client_aff533344a060e58277698039f547147a}{keep\+\_\+alive}\hypertarget{structmqtt__client_aff533344a060e58277698039f547147a}{}\label{structmqtt__client_aff533344a060e58277698039f547147a}

\begin{DoxyCompactList}\small\item\em The keep-\/alive time in seconds. \end{DoxyCompactList}\item 
int \hyperlink{structmqtt__client_ac23a02868e9b8c5cd2619b73ee4fcea6}{number\+\_\+of\+\_\+keep\+\_\+alives}
\begin{DoxyCompactList}\small\item\em A counter counting pings that have been sent to keep the connection alive. \end{DoxyCompactList}\item 
mqtt\+\_\+pal\+\_\+time\+\_\+t \hyperlink{structmqtt__client_a9e1ad5b2573d6e693a21031a89b1717e}{time\+\_\+of\+\_\+last\+\_\+send}
\begin{DoxyCompactList}\small\item\em The timestamp of the last message sent to the buffer. \end{DoxyCompactList}\item 
enum \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} \hyperlink{structmqtt__client_a99e1742736d93361e44c4412e730f113}{error}
\begin{DoxyCompactList}\small\item\em The error state of the client. \end{DoxyCompactList}\item 
int \hyperlink{structmqtt__client_a4ee652148f2b1b338f1527a85879e970}{response\+\_\+timeout}
\begin{DoxyCompactList}\small\item\em The timeout period in seconds. \end{DoxyCompactList}\item 
int \hyperlink{structmqtt__client_af5fed75fb3f83137d5c7635693cd7b6c}{number\+\_\+of\+\_\+timeouts}\hypertarget{structmqtt__client_af5fed75fb3f83137d5c7635693cd7b6c}{}\label{structmqtt__client_af5fed75fb3f83137d5c7635693cd7b6c}

\begin{DoxyCompactList}\small\item\em A counter counting the number of timeouts that have occurred. \end{DoxyCompactList}\item 
double \hyperlink{structmqtt__client_a4d1f8c7f4c364b07f75efcaf9613150e}{typical\+\_\+response\+\_\+time}
\begin{DoxyCompactList}\small\item\em Approximately much time it has typically taken to receive responses from the broker. \end{DoxyCompactList}\item 
void($\ast$ \hyperlink{structmqtt__client_a21b907c0e4686e4ae9adf8693626c313}{publish\+\_\+response\+\_\+callback} )(void $\ast$$\ast$state, struct \hyperlink{structmqtt__response__publish}{mqtt\+\_\+response\+\_\+publish} $\ast$publish)
\begin{DoxyCompactList}\small\item\em The callback that is called whenever a publish is received from the broker. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{structmqtt__client_a948d816462128ef2216c230644407f21}{publish\+\_\+response\+\_\+callback\+\_\+state}
\begin{DoxyCompactList}\small\item\em A pointer to any publish\+\_\+response\+\_\+callback state information you need. \end{DoxyCompactList}\item 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>uint8\_t $\ast$ \hyperlink{structmqtt__client_a1dca432059a7c59eef63e499b557a3bc}{mem\_start}\\
\>\>{\em The start of the receive buffer\textquotesingle{}s memory. }\\
\>size\_t \hyperlink{structmqtt__client_ae9963806182f9b34725837058b942420}{mem\_size}\\
\>\>{\em The size of the receive buffer\textquotesingle{}s memory. }\\
\>uint8\_t $\ast$ \hyperlink{structmqtt__client_afdb11ec0dd380efda42747585d88b924}{curr}\\
\>\>{\em A pointer to the next writtable location in the receive buffer. }\\
\>size\_t \hyperlink{structmqtt__client_aff50e45391cb2c0cab0924ce3d803817}{curr\_sz}\\
\>\>{\em The number of bytes that are still writable at curr. }\\
\} \hyperlink{structmqtt__client_a10bd64e39006466f579028457433915b}{recv\_buffer}\hypertarget{structmqtt__client_a10bd64e39006466f579028457433915b}{}\label{structmqtt__client_a10bd64e39006466f579028457433915b}
\\

\end{tabbing}\begin{DoxyCompactList}\small\item\em The buffer where ingress data is temporarily stored. \end{DoxyCompactList}\item 
mqtt\+\_\+pal\+\_\+mutex\+\_\+t \hyperlink{structmqtt__client_a885516373913fa6b50e960d50d4a5cba}{mutex}
\begin{DoxyCompactList}\small\item\em A variable passed to support thread-\/safety. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue} \hyperlink{structmqtt__client_a7fda1ddf0160b1cac09bad0c9d88027d}{mq}\hypertarget{structmqtt__client_a7fda1ddf0160b1cac09bad0c9d88027d}{}\label{structmqtt__client_a7fda1ddf0160b1cac09bad0c9d88027d}

\begin{DoxyCompactList}\small\item\em The sending message queue. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
An M\+Q\+TT client. 

\begin{DoxyNote}{Note}
All members can be manipulated via the related functions. 
\end{DoxyNote}
\begin{Desc}
\item[Examples\+: ]\par
\hyperlink{simple_publisher_8c-example}{simple\+\_\+publisher.\+c}, and \hyperlink{simple_subscriber_8c-example}{simple\+\_\+subscriber.\+c}.\end{Desc}


\subsection{Field Documentation}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!error@{error}}
\index{error@{error}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{error}{error}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Errors} mqtt\+\_\+client\+::error}\hypertarget{structmqtt__client_a99e1742736d93361e44c4412e730f113}{}\label{structmqtt__client_a99e1742736d93361e44c4412e730f113}


The error state of the client. 

error should be M\+Q\+T\+T\+\_\+\+OK for the entirety of the connection.

\begin{DoxyNote}{Note}
The error state will be M\+Q\+T\+T\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+N\+O\+T\+\_\+\+C\+O\+N\+N\+E\+C\+T\+ED until you call mqtt\+\_\+connect. 
\end{DoxyNote}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!mutex@{mutex}}
\index{mutex@{mutex}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{mutex}{mutex}}]{\setlength{\rightskip}{0pt plus 5cm}mqtt\+\_\+pal\+\_\+mutex\+\_\+t mqtt\+\_\+client\+::mutex}\hypertarget{structmqtt__client_a885516373913fa6b50e960d50d4a5cba}{}\label{structmqtt__client_a885516373913fa6b50e960d50d4a5cba}


A variable passed to support thread-\/safety. 

A pointer to this variable is passed to {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK}, and {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+M\+U\+T\+E\+X\+\_\+\+U\+N\+L\+O\+CK}. \index{mqtt\+\_\+client@{mqtt\+\_\+client}!number\+\_\+of\+\_\+keep\+\_\+alives@{number\+\_\+of\+\_\+keep\+\_\+alives}}
\index{number\+\_\+of\+\_\+keep\+\_\+alives@{number\+\_\+of\+\_\+keep\+\_\+alives}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{number\+\_\+of\+\_\+keep\+\_\+alives}{number_of_keep_alives}}]{\setlength{\rightskip}{0pt plus 5cm}int mqtt\+\_\+client\+::number\+\_\+of\+\_\+keep\+\_\+alives}\hypertarget{structmqtt__client_ac23a02868e9b8c5cd2619b73ee4fcea6}{}\label{structmqtt__client_ac23a02868e9b8c5cd2619b73ee4fcea6}


A counter counting pings that have been sent to keep the connection alive. 

\begin{DoxySeeAlso}{See also}
\hyperlink{structmqtt__client_aff533344a060e58277698039f547147a}{keep\+\_\+alive} 
\end{DoxySeeAlso}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!publish\+\_\+response\+\_\+callback@{publish\+\_\+response\+\_\+callback}}
\index{publish\+\_\+response\+\_\+callback@{publish\+\_\+response\+\_\+callback}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{publish\+\_\+response\+\_\+callback}{publish_response_callback}}]{\setlength{\rightskip}{0pt plus 5cm}void($\ast$ mqtt\+\_\+client\+::publish\+\_\+response\+\_\+callback) (void $\ast$$\ast$state, struct {\bf mqtt\+\_\+response\+\_\+publish} $\ast$publish)}\hypertarget{structmqtt__client_a21b907c0e4686e4ae9adf8693626c313}{}\label{structmqtt__client_a21b907c0e4686e4ae9adf8693626c313}


The callback that is called whenever a publish is received from the broker. 

Any topics that you have subscribed to will be returned from the broker as \hyperlink{structmqtt__response__publish}{mqtt\+\_\+response\+\_\+publish} messages. All the publishes received from the broker will be passed to this function.

\begin{DoxyNote}{Note}
A pointer to publish\+\_\+response\+\_\+callback\+\_\+state is always passed to the callback. Use publish\+\_\+response\+\_\+callback\+\_\+state to keep track of any state information you need. 
\end{DoxyNote}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!publish\+\_\+response\+\_\+callback\+\_\+state@{publish\+\_\+response\+\_\+callback\+\_\+state}}
\index{publish\+\_\+response\+\_\+callback\+\_\+state@{publish\+\_\+response\+\_\+callback\+\_\+state}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{publish\+\_\+response\+\_\+callback\+\_\+state}{publish_response_callback_state}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ mqtt\+\_\+client\+::publish\+\_\+response\+\_\+callback\+\_\+state}\hypertarget{structmqtt__client_a948d816462128ef2216c230644407f21}{}\label{structmqtt__client_a948d816462128ef2216c230644407f21}


A pointer to any publish\+\_\+response\+\_\+callback state information you need. 

\begin{DoxyNote}{Note}
A pointer to this pointer will always be publish\+\_\+response\+\_\+callback upon receiving a publish message from the broker. 
\end{DoxyNote}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!response\+\_\+timeout@{response\+\_\+timeout}}
\index{response\+\_\+timeout@{response\+\_\+timeout}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{response\+\_\+timeout}{response_timeout}}]{\setlength{\rightskip}{0pt plus 5cm}int mqtt\+\_\+client\+::response\+\_\+timeout}\hypertarget{structmqtt__client_a4ee652148f2b1b338f1527a85879e970}{}\label{structmqtt__client_a4ee652148f2b1b338f1527a85879e970}


The timeout period in seconds. 

If the broker doesn\textquotesingle{}t return an A\+CK within response\+\_\+timeout seconds a timeout will occur and the message will be retransmitted.

\begin{DoxyNote}{Note}
The default value is 30 \mbox{[}seconds\mbox{]} but you can change it at any time. 
\end{DoxyNote}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!time\+\_\+of\+\_\+last\+\_\+send@{time\+\_\+of\+\_\+last\+\_\+send}}
\index{time\+\_\+of\+\_\+last\+\_\+send@{time\+\_\+of\+\_\+last\+\_\+send}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{time\+\_\+of\+\_\+last\+\_\+send}{time_of_last_send}}]{\setlength{\rightskip}{0pt plus 5cm}mqtt\+\_\+pal\+\_\+time\+\_\+t mqtt\+\_\+client\+::time\+\_\+of\+\_\+last\+\_\+send}\hypertarget{structmqtt__client_a9e1ad5b2573d6e693a21031a89b1717e}{}\label{structmqtt__client_a9e1ad5b2573d6e693a21031a89b1717e}


The timestamp of the last message sent to the buffer. 

This is used to detect the need for keep-\/alive pings.

\begin{DoxySeeAlso}{See also}
\hyperlink{structmqtt__client_aff533344a060e58277698039f547147a}{keep\+\_\+alive} 
\end{DoxySeeAlso}
\index{mqtt\+\_\+client@{mqtt\+\_\+client}!typical\+\_\+response\+\_\+time@{typical\+\_\+response\+\_\+time}}
\index{typical\+\_\+response\+\_\+time@{typical\+\_\+response\+\_\+time}!mqtt\+\_\+client@{mqtt\+\_\+client}}
\subsubsection[{\texorpdfstring{typical\+\_\+response\+\_\+time}{typical_response_time}}]{\setlength{\rightskip}{0pt plus 5cm}double mqtt\+\_\+client\+::typical\+\_\+response\+\_\+time}\hypertarget{structmqtt__client_a4d1f8c7f4c364b07f75efcaf9613150e}{}\label{structmqtt__client_a4d1f8c7f4c364b07f75efcaf9613150e}


Approximately much time it has typically taken to receive responses from the broker. 

\begin{DoxyNote}{Note}
This is tracked using a exponential-\/averaging. 
\end{DoxyNote}


The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{mqtt_8h}{mqtt.\+h}\end{DoxyCompactItemize}
