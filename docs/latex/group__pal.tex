\hypertarget{group__pal}{}\section{Platform abstraction layer}
\label{group__pal}\index{Platform abstraction layer@{Platform abstraction layer}}


Documentation of the types and calls required to port M\+Q\+T\+T-\/C to a new platform.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
ssize\+\_\+t \hyperlink{group__pal_gac8dd7d5af889f5933dda733007adb9a3}{mqtt\+\_\+pal\+\_\+sendall} (int fd, const void $\ast$buf, size\+\_\+t len, int flags)
\begin{DoxyCompactList}\small\item\em Sends all the bytes in a buffer. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__pal_ga620d6ab20694c9b4d99293a47491004e}{mqtt\+\_\+pal\+\_\+recvall} (int fd, void $\ast$buf, size\+\_\+t bufsz, int flags)
\begin{DoxyCompactList}\small\item\em Non-\/blocking receive all the byte available. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Documentation of the types and calls required to port M\+Q\+T\+T-\/C to a new platform. 

\hyperlink{mqtt__pal_8h}{mqtt\+\_\+pal.\+h} is the {\itshape only} header file included in \hyperlink{mqtt_8c}{mqtt.\+c}. Therefore, to port M\+Q\+T\+T-\/C to a new platform the following types, functions, constants, and macros must be defined in \hyperlink{mqtt__pal_8h}{mqtt\+\_\+pal.\+h}\+:
\begin{DoxyItemize}
\item Types\+:
\begin{DoxyItemize}
\item {\ttfamily size\+\_\+t}, {\ttfamily ssize\+\_\+t} 
\item {\ttfamily uint8\+\_\+t}, {\ttfamily uint16\+\_\+t}, {\ttfamily uint32\+\_\+t} 
\item {\ttfamily va\+\_\+list} 
\item {\ttfamily mqtt\+\_\+pal\+\_\+time\+\_\+t} \+: return type of {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+T\+I\+M\+E()} 
\item {\ttfamily mqtt\+\_\+pal\+\_\+mutex\+\_\+t} \+: type of the argument that is passed to {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+CK} and {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+M\+U\+T\+E\+X\+\_\+\+R\+E\+L\+E\+A\+SE} 
\end{DoxyItemize}
\item Functions\+:
\begin{DoxyItemize}
\item {\ttfamily memcpy}, {\ttfamily strlen} 
\item {\ttfamily va\+\_\+start}, {\ttfamily va\+\_\+arg}, {\ttfamily va\+\_\+end} 
\end{DoxyItemize}
\item Constants\+:
\begin{DoxyItemize}
\item {\ttfamily I\+N\+T\+\_\+\+M\+IN} 
\end{DoxyItemize}
\end{DoxyItemize}

Additionally, three macro\textquotesingle{}s are required\+:
\begin{DoxyItemize}
\item {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+H\+T\+O\+N\+S(s)} \+: host-\/to-\/network endian conversion for uint16\+\_\+t.
\item {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+N\+T\+O\+H\+S(s)} \+: network-\/to-\/host endian conversion for uint16\+\_\+t.
\item {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+T\+I\+M\+E()} \+: returns \mbox{[}type\+: {\ttfamily mqtt\+\_\+pal\+\_\+time\+\_\+t}\mbox{]} current time in seconds.
\item {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+O\+C\+K(mtx\+\_\+pointer)} \+: macro that locks the mutex pointed to by {\ttfamily mtx\+\_\+pointer}.
\item {\ttfamily M\+Q\+T\+T\+\_\+\+P\+A\+L\+\_\+\+M\+U\+T\+E\+X\+\_\+\+R\+E\+L\+E\+A\+S\+E(mtx\+\_\+pointer)} \+: macro that unlocks the mutex pointed to by {\ttfamily mtx\+\_\+pointer}.
\end{DoxyItemize}

Lastly, \hyperlink{group__pal_gac8dd7d5af889f5933dda733007adb9a3}{mqtt\+\_\+pal\+\_\+sendall} and \hyperlink{group__pal_ga620d6ab20694c9b4d99293a47491004e}{mqtt\+\_\+pal\+\_\+recvall}, must be implemented in \hyperlink{mqtt__pal_8c}{mqtt\+\_\+pal.\+c} for sending and receiving data using the platforms socket calls. 

\subsection{Function Documentation}
\index{Platform abstraction layer@{Platform abstraction layer}!mqtt\+\_\+pal\+\_\+recvall@{mqtt\+\_\+pal\+\_\+recvall}}
\index{mqtt\+\_\+pal\+\_\+recvall@{mqtt\+\_\+pal\+\_\+recvall}!Platform abstraction layer@{Platform abstraction layer}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+pal\+\_\+recvall(int fd, void $\ast$buf, size\+\_\+t bufsz, int flags)}{mqtt_pal_recvall(int fd, void *buf, size_t bufsz, int flags)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+pal\+\_\+recvall (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{void $\ast$}]{buf, }
\item[{size\+\_\+t}]{bufsz, }
\item[{int}]{flags}
\end{DoxyParamCaption}
)}\hypertarget{group__pal_ga620d6ab20694c9b4d99293a47491004e}{}\label{group__pal_ga620d6ab20694c9b4d99293a47491004e}


Non-\/blocking receive all the byte available. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & The file-\/descriptor (or handle) of the socket. \\
\hline
\mbox{\tt in}  & {\em buf} & A pointer to the receive buffer. \\
\hline
\mbox{\tt in}  & {\em bufsz} & The max number of bytes that can be put into {\ttfamily buf}. \\
\hline
\mbox{\tt in}  & {\em flags} & Flags which are passed to the underlying socket.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes received if successful, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Platform abstraction layer@{Platform abstraction layer}!mqtt\+\_\+pal\+\_\+sendall@{mqtt\+\_\+pal\+\_\+sendall}}
\index{mqtt\+\_\+pal\+\_\+sendall@{mqtt\+\_\+pal\+\_\+sendall}!Platform abstraction layer@{Platform abstraction layer}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+pal\+\_\+sendall(int fd, const void $\ast$buf, size\+\_\+t len, int flags)}{mqtt_pal_sendall(int fd, const void *buf, size_t len, int flags)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+pal\+\_\+sendall (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{const void $\ast$}]{buf, }
\item[{size\+\_\+t}]{len, }
\item[{int}]{flags}
\end{DoxyParamCaption}
)}\hypertarget{group__pal_gac8dd7d5af889f5933dda733007adb9a3}{}\label{group__pal_gac8dd7d5af889f5933dda733007adb9a3}


Sends all the bytes in a buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & The file-\/descriptor (or handle) of the socket. \\
\hline
\mbox{\tt in}  & {\em buf} & A pointer to the first byte in the buffer to send. \\
\hline
\mbox{\tt in}  & {\em len} & The number of bytes to send (starting at {\ttfamily buf}). \\
\hline
\mbox{\tt in}  & {\em flags} & Flags which are passed to the underlying socket.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes sent if successful, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
