\hypertarget{group__unpackers}{}\section{Control Packet Deserialization}
\label{group__unpackers}\index{Control Packet Deserialization@{Control Packet Deserialization}}


Developer documentation of the functions and datastructures used for deserializing M\+Q\+TT control packets.  


\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structmqtt__fixed__header}{mqtt\+\_\+fixed\+\_\+header}
\begin{DoxyCompactList}\small\item\em The fixed header of an M\+Q\+TT control packet. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__connack}{mqtt\+\_\+response\+\_\+connack}
\begin{DoxyCompactList}\small\item\em A connection response datastructure. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__publish}{mqtt\+\_\+response\+\_\+publish}
\begin{DoxyCompactList}\small\item\em A publish packet received from the broker.

A publish packet is received from the broker when a client publishes to a topic that the {\itshape \{local} client\} is subscribed to. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__puback}{mqtt\+\_\+response\+\_\+puback}
\begin{DoxyCompactList}\small\item\em A publish acknowledgement for messages that were published with QoS level 1. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__pubrec}{mqtt\+\_\+response\+\_\+pubrec}
\begin{DoxyCompactList}\small\item\em The response packet to a P\+U\+B\+L\+I\+SH packet with QoS level 2. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__pubrel}{mqtt\+\_\+response\+\_\+pubrel}
\begin{DoxyCompactList}\small\item\em The response to a P\+U\+B\+R\+EC packet. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__pubcomp}{mqtt\+\_\+response\+\_\+pubcomp}
\begin{DoxyCompactList}\small\item\em The response to a P\+U\+B\+R\+EL packet. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__suback}{mqtt\+\_\+response\+\_\+suback}
\begin{DoxyCompactList}\small\item\em The response to a subscription request. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__unsuback}{mqtt\+\_\+response\+\_\+unsuback}
\begin{DoxyCompactList}\small\item\em The brokers response to a U\+N\+S\+U\+B\+S\+C\+R\+I\+BE request. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response__pingresp}{mqtt\+\_\+response\+\_\+pingresp}
\begin{DoxyCompactList}\small\item\em The response to a ping request. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__response}{mqtt\+\_\+response}
\begin{DoxyCompactList}\small\item\em A struct used to deserialize/interpret an incoming packet from the broker. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__unpackers_gacbd36b88ec7f62bc161b07e1a0aed679}{M\+Q\+T\+T\+Control\+Packet\+Type} \{ \\*
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+C\+O\+N\+N\+E\+CT} =1u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+C\+O\+N\+N\+A\+CK} =2u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+L\+I\+SH} =3u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+A\+CK} =4u, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+R\+EC} =5u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+R\+EL} =6u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+C\+O\+MP} =7u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+S\+U\+B\+S\+C\+R\+I\+BE} =8u, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+S\+U\+B\+A\+CK} =9u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+U\+N\+S\+U\+B\+S\+C\+R\+I\+BE} =10u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+U\+N\+S\+U\+B\+A\+CK} =11u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+I\+N\+G\+R\+EQ} =12u, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+I\+N\+G\+R\+E\+SP} =13u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+D\+I\+S\+C\+O\+N\+N\+E\+CT} =14u
 \}\begin{DoxyCompactList}\small\item\em An enumeration of the M\+Q\+TT control packet types. \end{DoxyCompactList}
\item 
enum \hyperlink{group__unpackers_ga07e480dfa5738e60c54ad0447ddb1a25}{M\+Q\+T\+T\+Connack\+Return\+Code} \{ \\*
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+A\+C\+C\+E\+P\+T\+ED} = 0u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+R\+E\+F\+U\+S\+E\+D\+\_\+\+P\+R\+O\+T\+O\+C\+O\+L\+\_\+\+V\+E\+R\+S\+I\+ON} = 1u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+R\+E\+F\+U\+S\+E\+D\+\_\+\+I\+D\+E\+N\+T\+I\+F\+I\+E\+R\+\_\+\+R\+E\+J\+E\+C\+T\+ED} = 2u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+R\+E\+F\+U\+S\+E\+D\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+U\+N\+A\+V\+A\+I\+L\+A\+B\+LE} = 3u, 
\\*
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+R\+E\+F\+U\+S\+E\+D\+\_\+\+B\+A\+D\+\_\+\+U\+S\+E\+R\+\_\+\+N\+A\+M\+E\+\_\+\+O\+R\+\_\+\+P\+A\+S\+S\+W\+O\+RD} = 4u, 
{\bfseries M\+Q\+T\+T\+\_\+\+C\+O\+N\+N\+A\+C\+K\+\_\+\+R\+E\+F\+U\+S\+E\+D\+\_\+\+N\+O\+T\+\_\+\+A\+U\+T\+H\+O\+R\+I\+Z\+ED} = 5u
 \}\begin{DoxyCompactList}\small\item\em An enumeration of the return codes returned in a C\+O\+N\+N\+A\+CK packet. \end{DoxyCompactList}
\item 
enum \hyperlink{group__unpackers_ga2d626b05e589a148ce2e9e97f41302ae}{M\+Q\+T\+T\+Suback\+Return\+Codes} \{ {\bfseries M\+Q\+T\+T\+\_\+\+S\+U\+B\+A\+C\+K\+\_\+\+S\+U\+C\+C\+E\+S\+S\+\_\+\+M\+A\+X\+\_\+\+Q\+O\+S\+\_\+0} = 0u, 
{\bfseries M\+Q\+T\+T\+\_\+\+S\+U\+B\+A\+C\+K\+\_\+\+S\+U\+C\+C\+E\+S\+S\+\_\+\+M\+A\+X\+\_\+\+Q\+O\+S\+\_\+1} = 1u, 
{\bfseries M\+Q\+T\+T\+\_\+\+S\+U\+B\+A\+C\+K\+\_\+\+S\+U\+C\+C\+E\+S\+S\+\_\+\+M\+A\+X\+\_\+\+Q\+O\+S\+\_\+2} = 2u, 
{\bfseries M\+Q\+T\+T\+\_\+\+S\+U\+B\+A\+C\+K\+\_\+\+F\+A\+I\+L\+U\+RE} = 128u
 \}\begin{DoxyCompactList}\small\item\em An enumeration of subscription acknowledgement return codes. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
ssize\+\_\+t \hyperlink{group__unpackers_gad596aa5faf7f79e05fb15da33321db10}{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header} (struct \hyperlink{structmqtt__response}{mqtt\+\_\+response} $\ast$response, const uint8\+\_\+t $\ast$buf, size\+\_\+t bufsz)
\begin{DoxyCompactList}\small\item\em Deserialize the contents of {\ttfamily buf} into an \hyperlink{structmqtt__fixed__header}{mqtt\+\_\+fixed\+\_\+header} object. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__unpackers_gaa174fec8a214d65ee887b5b6c9b79d78}{mqtt\+\_\+unpack\+\_\+connack\+\_\+response} (struct \hyperlink{structmqtt__response}{mqtt\+\_\+response} $\ast$\hyperlink{structmqtt__response}{mqtt\+\_\+response}, const uint8\+\_\+t $\ast$buf)
\begin{DoxyCompactList}\small\item\em Deserialize a C\+O\+N\+N\+A\+CK response from {\ttfamily buf}. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__unpackers_gae8ee6c1da210c4782f4f9939fe6ec828}{mqtt\+\_\+unpack\+\_\+publish\+\_\+response} (struct \hyperlink{structmqtt__response}{mqtt\+\_\+response} $\ast$\hyperlink{structmqtt__response}{mqtt\+\_\+response}, const uint8\+\_\+t $\ast$buf)
\begin{DoxyCompactList}\small\item\em Deserialize a publish response from {\ttfamily buf}. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__unpackers_ga8c9b9bb3aab29bfca1408b9e5c5d4a01}{mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response} (struct \hyperlink{structmqtt__response}{mqtt\+\_\+response} $\ast$\hyperlink{structmqtt__response}{mqtt\+\_\+response}, const uint8\+\_\+t $\ast$buf)
\begin{DoxyCompactList}\small\item\em Deserialize a P\+U\+B\+A\+C\+K/\+P\+U\+B\+R\+E\+C/\+P\+U\+B\+R\+E\+L/\+P\+U\+B\+C\+O\+MP packet from {\ttfamily buf}. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__unpackers_gaae124a93579dcd31e6f52411f4582fbd}{mqtt\+\_\+unpack\+\_\+response} (struct \hyperlink{structmqtt__response}{mqtt\+\_\+response} $\ast$response, const uint8\+\_\+t $\ast$buf, size\+\_\+t bufsz)
\begin{DoxyCompactList}\small\item\em Deserialize a packet from the broker. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Developer documentation of the functions and datastructures used for deserializing M\+Q\+TT control packets. 



\subsection{Enumeration Type Documentation}
\index{Control Packet Deserialization@{Control Packet Deserialization}!M\+Q\+T\+T\+Connack\+Return\+Code@{M\+Q\+T\+T\+Connack\+Return\+Code}}
\index{M\+Q\+T\+T\+Connack\+Return\+Code@{M\+Q\+T\+T\+Connack\+Return\+Code}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{M\+Q\+T\+T\+Connack\+Return\+Code}{MQTTConnackReturnCode}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Connack\+Return\+Code}}\hypertarget{group__unpackers_ga07e480dfa5738e60c54ad0447ddb1a25}{}\label{group__unpackers_ga07e480dfa5738e60c54ad0447ddb1a25}


An enumeration of the return codes returned in a C\+O\+N\+N\+A\+CK packet. 

\begin{DoxySeeAlso}{See also}
\href{http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Table_3.1_-}{\tt M\+Q\+TT v3.\+1.\+1\+: C\+O\+N\+N\+A\+CK return codes. } 
\end{DoxySeeAlso}
\index{Control Packet Deserialization@{Control Packet Deserialization}!M\+Q\+T\+T\+Control\+Packet\+Type@{M\+Q\+T\+T\+Control\+Packet\+Type}}
\index{M\+Q\+T\+T\+Control\+Packet\+Type@{M\+Q\+T\+T\+Control\+Packet\+Type}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{M\+Q\+T\+T\+Control\+Packet\+Type}{MQTTControlPacketType}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Control\+Packet\+Type}}\hypertarget{group__unpackers_gacbd36b88ec7f62bc161b07e1a0aed679}{}\label{group__unpackers_gacbd36b88ec7f62bc161b07e1a0aed679}


An enumeration of the M\+Q\+TT control packet types. 

\begin{DoxySeeAlso}{See also}
\href{http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Toc398718021}{\tt M\+Q\+TT v3.\+1.\+1\+: M\+Q\+TT Control Packet Types } 
\end{DoxySeeAlso}
\index{Control Packet Deserialization@{Control Packet Deserialization}!M\+Q\+T\+T\+Suback\+Return\+Codes@{M\+Q\+T\+T\+Suback\+Return\+Codes}}
\index{M\+Q\+T\+T\+Suback\+Return\+Codes@{M\+Q\+T\+T\+Suback\+Return\+Codes}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{M\+Q\+T\+T\+Suback\+Return\+Codes}{MQTTSubackReturnCodes}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf M\+Q\+T\+T\+Suback\+Return\+Codes}}\hypertarget{group__unpackers_ga2d626b05e589a148ce2e9e97f41302ae}{}\label{group__unpackers_ga2d626b05e589a148ce2e9e97f41302ae}


An enumeration of subscription acknowledgement return codes. 

\begin{DoxySeeAlso}{See also}
\href{http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Figure_3.26_-}{\tt M\+Q\+TT v3.\+1.\+1\+: S\+U\+B\+A\+CK Return Codes. } 
\end{DoxySeeAlso}


\subsection{Function Documentation}
\index{Control Packet Deserialization@{Control Packet Deserialization}!mqtt\+\_\+unpack\+\_\+connack\+\_\+response@{mqtt\+\_\+unpack\+\_\+connack\+\_\+response}}
\index{mqtt\+\_\+unpack\+\_\+connack\+\_\+response@{mqtt\+\_\+unpack\+\_\+connack\+\_\+response}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+unpack\+\_\+connack\+\_\+response(struct mqtt\+\_\+response $\ast$mqtt\+\_\+response, const uint8\+\_\+t $\ast$buf)}{mqtt_unpack_connack_response(struct mqtt_response *mqtt_response, const uint8_t *buf)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+unpack\+\_\+connack\+\_\+response (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+response} $\ast$}]{mqtt\+\_\+response, }
\item[{const uint8\+\_\+t $\ast$}]{buf}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__unpackers_gaa174fec8a214d65ee887b5b6c9b79d78}{}\label{group__unpackers_gaa174fec8a214d65ee887b5b6c9b79d78}


Deserialize a C\+O\+N\+N\+A\+CK response from {\ttfamily buf}. 

\begin{DoxyPrecond}{Precondition}
\hyperlink{group__unpackers_gad596aa5faf7f79e05fb15da33321db10}{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header} must have returned a positive value and the control packet type must be {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+C\+O\+N\+N\+A\+CK}.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em \hyperlink{structmqtt__response}{mqtt\+\_\+response}} & the \hyperlink{structmqtt__response}{mqtt\+\_\+response} that will be initialized. \\
\hline
\mbox{\tt in}  & {\em buf} & the buffer that contains the variable header and payload of the packet. The first byte of {\ttfamily buf} should be the first byte of the variable header.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes that were consumed, or 0 if the buffer does not contain enough bytes to parse the packet, or a negative value if there was a protocol violation. 
\end{DoxyReturn}
\index{Control Packet Deserialization@{Control Packet Deserialization}!mqtt\+\_\+unpack\+\_\+fixed\+\_\+header@{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header}}
\index{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header@{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header(struct mqtt\+\_\+response $\ast$response, const uint8\+\_\+t $\ast$buf, size\+\_\+t bufsz)}{mqtt_unpack_fixed_header(struct mqtt_response *response, const uint8_t *buf, size_t bufsz)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+unpack\+\_\+fixed\+\_\+header (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+response} $\ast$}]{response, }
\item[{const uint8\+\_\+t $\ast$}]{buf, }
\item[{size\+\_\+t}]{bufsz}
\end{DoxyParamCaption}
)}\hypertarget{group__unpackers_gad596aa5faf7f79e05fb15da33321db10}{}\label{group__unpackers_gad596aa5faf7f79e05fb15da33321db10}


Deserialize the contents of {\ttfamily buf} into an \hyperlink{structmqtt__fixed__header}{mqtt\+\_\+fixed\+\_\+header} object. 

\begin{DoxyNote}{Note}
This function performs complete error checking and a positive return value means the entire \hyperlink{structmqtt__response}{mqtt\+\_\+response} can be deserialized from {\ttfamily buf}.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em response} & the response who\textquotesingle{}s \hyperlink{structmqtt__response_aa8f110125c17b765fab496bf1c2c7394}{mqtt\+\_\+response\+::fixed\+\_\+header} will be initialized. \\
\hline
\mbox{\tt in}  & {\em buf} & the buffer. \\
\hline
\mbox{\tt in}  & {\em bufsz} & the total number of bytes in the buffer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes that were consumed, or 0 if the buffer does not contain enough bytes to parse the packet, or a negative value if there was a protocol violation. 
\end{DoxyReturn}
\index{Control Packet Deserialization@{Control Packet Deserialization}!mqtt\+\_\+unpack\+\_\+publish\+\_\+response@{mqtt\+\_\+unpack\+\_\+publish\+\_\+response}}
\index{mqtt\+\_\+unpack\+\_\+publish\+\_\+response@{mqtt\+\_\+unpack\+\_\+publish\+\_\+response}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+unpack\+\_\+publish\+\_\+response(struct mqtt\+\_\+response $\ast$mqtt\+\_\+response, const uint8\+\_\+t $\ast$buf)}{mqtt_unpack_publish_response(struct mqtt_response *mqtt_response, const uint8_t *buf)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+unpack\+\_\+publish\+\_\+response (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+response} $\ast$}]{mqtt\+\_\+response, }
\item[{const uint8\+\_\+t $\ast$}]{buf}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__unpackers_gae8ee6c1da210c4782f4f9939fe6ec828}{}\label{group__unpackers_gae8ee6c1da210c4782f4f9939fe6ec828}


Deserialize a publish response from {\ttfamily buf}. 

\begin{DoxyPrecond}{Precondition}
\hyperlink{group__unpackers_gad596aa5faf7f79e05fb15da33321db10}{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header} must have returned a positive value and the \hyperlink{structmqtt__response}{mqtt\+\_\+response} must have a control type of {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+L\+I\+SH}.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em \hyperlink{structmqtt__response}{mqtt\+\_\+response}} & the response that is initialized from the contents of {\ttfamily buf}. \\
\hline
\mbox{\tt in}  & {\em buf} & the buffer with the incoming data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes that were consumed, or 0 if the buffer does not contain enough bytes to parse the packet, or a negative value if there was a protocol violation. 
\end{DoxyReturn}
\index{Control Packet Deserialization@{Control Packet Deserialization}!mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response@{mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response}}
\index{mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response@{mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response(struct mqtt\+\_\+response $\ast$mqtt\+\_\+response, const uint8\+\_\+t $\ast$buf)}{mqtt_unpack_pubxxx_response(struct mqtt_response *mqtt_response, const uint8_t *buf)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+unpack\+\_\+pubxxx\+\_\+response (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+response} $\ast$}]{mqtt\+\_\+response, }
\item[{const uint8\+\_\+t $\ast$}]{buf}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__unpackers_ga8c9b9bb3aab29bfca1408b9e5c5d4a01}{}\label{group__unpackers_ga8c9b9bb3aab29bfca1408b9e5c5d4a01}


Deserialize a P\+U\+B\+A\+C\+K/\+P\+U\+B\+R\+E\+C/\+P\+U\+B\+R\+E\+L/\+P\+U\+B\+C\+O\+MP packet from {\ttfamily buf}. 

\begin{DoxyPrecond}{Precondition}
\hyperlink{group__unpackers_gad596aa5faf7f79e05fb15da33321db10}{mqtt\+\_\+unpack\+\_\+fixed\+\_\+header} must have returned a positive value and the \hyperlink{structmqtt__response}{mqtt\+\_\+response} must have a control type of {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+A\+CK}, {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+R\+EC}, {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+R\+EL} or {\ttfamily M\+Q\+T\+T\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+P\+U\+B\+C\+O\+MP}.
\end{DoxyPrecond}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em \hyperlink{structmqtt__response}{mqtt\+\_\+response}} & the response that is initialized from the contents of {\ttfamily buf}. \\
\hline
\mbox{\tt in}  & {\em buf} & the buffer with the incoming data.\\
\hline
\end{DoxyParams}
\hyperlink{structmqtt__response__pubrec}{mqtt\+\_\+response\+\_\+pubrec} \hyperlink{structmqtt__response__pubrel}{mqtt\+\_\+response\+\_\+pubrel} \hyperlink{structmqtt__response__pubcomp}{mqtt\+\_\+response\+\_\+pubcomp}

\begin{DoxyReturn}{Returns}
The number of bytes that were consumed, or 0 if the buffer does not contain enough bytes to parse the packet, or a negative value if there was a protocol violation. 
\end{DoxyReturn}
\index{Control Packet Deserialization@{Control Packet Deserialization}!mqtt\+\_\+unpack\+\_\+response@{mqtt\+\_\+unpack\+\_\+response}}
\index{mqtt\+\_\+unpack\+\_\+response@{mqtt\+\_\+unpack\+\_\+response}!Control Packet Deserialization@{Control Packet Deserialization}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+unpack\+\_\+response(struct mqtt\+\_\+response $\ast$response, const uint8\+\_\+t $\ast$buf, size\+\_\+t bufsz)}{mqtt_unpack_response(struct mqtt_response *response, const uint8_t *buf, size_t bufsz)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t mqtt\+\_\+unpack\+\_\+response (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+response} $\ast$}]{response, }
\item[{const uint8\+\_\+t $\ast$}]{buf, }
\item[{size\+\_\+t}]{bufsz}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__unpackers_gaae124a93579dcd31e6f52411f4582fbd}{}\label{group__unpackers_gaae124a93579dcd31e6f52411f4582fbd}


Deserialize a packet from the broker. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em response} & the \hyperlink{structmqtt__response}{mqtt\+\_\+response} that will be initialize from {\ttfamily buf}. \\
\hline
\mbox{\tt in}  & {\em buf} & the incoming data buffer. \\
\hline
\mbox{\tt in}  & {\em bufsz} & the number of bytes available in the buffer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of bytes consumed on success, zero {\ttfamily buf} does not contain enough bytes to deserialize the packet, a negative value if a protocol violation was encountered. 
\end{DoxyReturn}
