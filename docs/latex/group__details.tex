\hypertarget{group__details}{}\section{Implementation details}
\label{group__details}\index{Implementation details@{Implementation details}}


Documentation for developers.  


\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message}
\begin{DoxyCompactList}\small\item\em A message in a \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue}. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue}
\begin{DoxyCompactList}\small\item\em A message queue. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__client}{mqtt\+\_\+client}
\begin{DoxyCompactList}\small\item\em An M\+Q\+TT client. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__details_gadfa141880e5b30429bd89018da0c8d94}{mqtt\+\_\+mq\+\_\+get}(mq\+\_\+ptr,  index)~(((struct \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message}$\ast$) ((mq\+\_\+ptr)-\/$>$mem\+\_\+end)) -\/ 1 -\/ index)
\begin{DoxyCompactList}\small\item\em Returns the \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message} at {\ttfamily index}. \end{DoxyCompactList}\item 
\#define \hyperlink{group__details_ga4be078d9d0bd6183b9082f3217622223}{mqtt\+\_\+mq\+\_\+length}(mq\+\_\+ptr)~(((struct \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message}$\ast$) ((mq\+\_\+ptr)-\/$>$mem\+\_\+end)) -\/ (mq\+\_\+ptr)-\/$>$queue\+\_\+tail)\hypertarget{group__details_ga4be078d9d0bd6183b9082f3217622223}{}\label{group__details_ga4be078d9d0bd6183b9082f3217622223}

\begin{DoxyCompactList}\small\item\em Returns the number of messages in the message queue, {\ttfamily mq\+\_\+ptr}. \end{DoxyCompactList}\item 
\#define \hyperlink{group__details_ga8cd873da2116975ce39b313f93068d83}{mqtt\+\_\+mq\+\_\+currsz}(mq\+\_\+ptr)~(mq\+\_\+ptr-\/$>$curr $>$= (uint8\+\_\+t$\ast$) ((mq\+\_\+ptr)-\/$>$queue\+\_\+tail -\/ 1)) ? 0 \+: ((uint8\+\_\+t$\ast$) ((mq\+\_\+ptr)-\/$>$queue\+\_\+tail -\/ 1)) -\/ (mq\+\_\+ptr)-\/$>$curr\hypertarget{group__details_ga8cd873da2116975ce39b313f93068d83}{}\label{group__details_ga8cd873da2116975ce39b313f93068d83}

\begin{DoxyCompactList}\small\item\em Used internally to recalculate the {\ttfamily curr\+\_\+sz}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__details_ga28b018ca5d1c81101d36f9c0d532a0d0}{M\+Q\+T\+T\+Queued\+Message\+State} \{ {\bfseries M\+Q\+T\+T\+\_\+\+Q\+U\+E\+U\+E\+D\+\_\+\+U\+N\+S\+E\+NT}, 
{\bfseries M\+Q\+T\+T\+\_\+\+Q\+U\+E\+U\+E\+D\+\_\+\+A\+W\+A\+I\+T\+I\+N\+G\+\_\+\+A\+CK}, 
{\bfseries M\+Q\+T\+T\+\_\+\+Q\+U\+E\+U\+E\+D\+\_\+\+C\+O\+M\+P\+L\+E\+TE}
 \}\hypertarget{group__details_ga28b018ca5d1c81101d36f9c0d532a0d0}{}\label{group__details_ga28b018ca5d1c81101d36f9c0d532a0d0}
\begin{DoxyCompactList}\small\item\em An enumeration of queued message states. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \hyperlink{group__details_ga7ca75c661980d4af50493f59a386f378}{\+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client)
\begin{DoxyCompactList}\small\item\em Generate a new next packet ID.

Packet ID\textquotesingle{}s are generated using a max-\/length L\+F\+SR. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__details_gacf553ca88f48350dbde0dc3b96e550f7}{\+\_\+\+\_\+mqtt\+\_\+send} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client)
\begin{DoxyCompactList}\small\item\em Handles egress client traffic. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__details_ga4d50a465c684a5ecd1c000f811fa601e}{\+\_\+\+\_\+mqtt\+\_\+recv} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client)
\begin{DoxyCompactList}\small\item\em Handles ingress client traffic. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__details_gae09d4412a871ecec31377db55cc54228}{\+\_\+\+\_\+mqtt\+\_\+puback} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, uint16\+\_\+t packet\+\_\+id)
\begin{DoxyCompactList}\small\item\em Acknowledge an ingree publish with Q\+OS==1. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__details_ga874c62f7a20b6adf13dbed2b4e2dd985}{\+\_\+\+\_\+mqtt\+\_\+pubrec} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, uint16\+\_\+t packet\+\_\+id)
\begin{DoxyCompactList}\small\item\em Acknowledge an ingree publish with Q\+OS==2. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__details_ga427f9191ab9967b75e0a7a2f7fa0dca0}{\+\_\+\+\_\+mqtt\+\_\+pubrel} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, uint16\+\_\+t packet\+\_\+id)
\begin{DoxyCompactList}\small\item\em Acknowledge an ingree P\+U\+B\+R\+EC packet. \end{DoxyCompactList}\item 
ssize\+\_\+t \hyperlink{group__details_ga86ddd2a08fbe4bd351dfd161db93303d}{\+\_\+\+\_\+mqtt\+\_\+pubcomp} (struct \hyperlink{structmqtt__client}{mqtt\+\_\+client} $\ast$client, uint16\+\_\+t packet\+\_\+id)
\begin{DoxyCompactList}\small\item\em Acknowledge an ingree P\+U\+B\+R\+EL packet. \end{DoxyCompactList}\item 
void \hyperlink{group__details_ga0da861c969387bf8d0229924543d9bb7}{mqtt\+\_\+mq\+\_\+init} (struct \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue} $\ast$mq, void $\ast$buf, size\+\_\+t bufsz)
\begin{DoxyCompactList}\small\item\em Initialize a message queue. \end{DoxyCompactList}\item 
void \hyperlink{group__details_gadb54c413b4d884619c50cc20ee6eb084}{mqtt\+\_\+mq\+\_\+clean} (struct \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue} $\ast$mq)
\begin{DoxyCompactList}\small\item\em Clear as many messages from the front of the queue as possible. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message} $\ast$ \hyperlink{group__details_gaa34e6af3ab1af60ebf8fe7b86be868fc}{mqtt\+\_\+mq\+\_\+register} (struct \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue} $\ast$mq, size\+\_\+t nbytes)
\begin{DoxyCompactList}\small\item\em Register a message that was just added to the buffer. \end{DoxyCompactList}\item 
struct \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message} $\ast$ \hyperlink{group__details_ga1ffcd45af057865a0d85b4e9e24789a2}{mqtt\+\_\+mq\+\_\+find} (struct \hyperlink{structmqtt__message__queue}{mqtt\+\_\+message\+\_\+queue} $\ast$mq, enum \hyperlink{group__unpackers_gacbd36b88ec7f62bc161b07e1a0aed679}{M\+Q\+T\+T\+Control\+Packet\+Type} control\+\_\+type, uint16\+\_\+t $\ast$packet\+\_\+id)
\begin{DoxyCompactList}\small\item\em Find a message in the message queue. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Documentation for developers. 

\begin{DoxyNote}{Note}
To deserialize a packet from a buffer use \hyperlink{group__unpackers_gaae124a93579dcd31e6f52411f4582fbd}{mqtt\+\_\+unpack\+\_\+response} (it\textquotesingle{}s the only function you need). 
\end{DoxyNote}


\subsection{Macro Definition Documentation}
\index{Implementation details@{Implementation details}!mqtt\+\_\+mq\+\_\+get@{mqtt\+\_\+mq\+\_\+get}}
\index{mqtt\+\_\+mq\+\_\+get@{mqtt\+\_\+mq\+\_\+get}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+mq\+\_\+get}{mqtt_mq_get}}]{\setlength{\rightskip}{0pt plus 5cm}\#define mqtt\+\_\+mq\+\_\+get(
\begin{DoxyParamCaption}
\item[{}]{mq\+\_\+ptr, }
\item[{}]{index}
\end{DoxyParamCaption}
)~(((struct {\bf mqtt\+\_\+queued\+\_\+message}$\ast$) ((mq\+\_\+ptr)-\/$>$mem\+\_\+end)) -\/ 1 -\/ index)}\hypertarget{group__details_gadfa141880e5b30429bd89018da0c8d94}{}\label{group__details_gadfa141880e5b30429bd89018da0c8d94}


Returns the \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message} at {\ttfamily index}. 


\begin{DoxyParams}{Parameters}
{\em mq\+\_\+ptr} & A pointer to the message queue. \\
\hline
{\em index} & The index of the message.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message} at {\ttfamily index}. 
\end{DoxyReturn}


\subsection{Function Documentation}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid@{\+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid}}
\index{\+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid@{\+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid(struct mqtt\+\_\+client $\ast$client)}{__mqtt_next_pid(struct mqtt_client *client)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t \+\_\+\+\_\+mqtt\+\_\+next\+\_\+pid (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client}
\end{DoxyParamCaption}
)}\hypertarget{group__details_ga7ca75c661980d4af50493f59a386f378}{}\label{group__details_ga7ca75c661980d4af50493f59a386f378}


Generate a new next packet ID.

Packet ID\textquotesingle{}s are generated using a max-\/length L\+F\+SR. 


\begin{DoxyParams}{Parameters}
{\em client} & The M\+Q\+TT client.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The new packet ID that should be used. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+puback@{\+\_\+\+\_\+mqtt\+\_\+puback}}
\index{\+\_\+\+\_\+mqtt\+\_\+puback@{\+\_\+\+\_\+mqtt\+\_\+puback}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+puback(struct mqtt\+\_\+client $\ast$client, uint16\+\_\+t packet\+\_\+id)}{__mqtt_puback(struct mqtt_client *client, uint16_t packet_id)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t \+\_\+\+\_\+mqtt\+\_\+puback (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{uint16\+\_\+t}]{packet\+\_\+id}
\end{DoxyParamCaption}
)}\hypertarget{group__details_gae09d4412a871ecec31377db55cc54228}{}\label{group__details_gae09d4412a871ecec31377db55cc54228}


Acknowledge an ingree publish with Q\+OS==1. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em packet\+\_\+id} & The packet ID of the ingress publish being acknowledged.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+pubcomp@{\+\_\+\+\_\+mqtt\+\_\+pubcomp}}
\index{\+\_\+\+\_\+mqtt\+\_\+pubcomp@{\+\_\+\+\_\+mqtt\+\_\+pubcomp}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+pubcomp(struct mqtt\+\_\+client $\ast$client, uint16\+\_\+t packet\+\_\+id)}{__mqtt_pubcomp(struct mqtt_client *client, uint16_t packet_id)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t \+\_\+\+\_\+mqtt\+\_\+pubcomp (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{uint16\+\_\+t}]{packet\+\_\+id}
\end{DoxyParamCaption}
)}\hypertarget{group__details_ga86ddd2a08fbe4bd351dfd161db93303d}{}\label{group__details_ga86ddd2a08fbe4bd351dfd161db93303d}


Acknowledge an ingree P\+U\+B\+R\+EL packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em packet\+\_\+id} & The packet ID of the ingress P\+U\+B\+R\+EL being acknowledged.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+pubrec@{\+\_\+\+\_\+mqtt\+\_\+pubrec}}
\index{\+\_\+\+\_\+mqtt\+\_\+pubrec@{\+\_\+\+\_\+mqtt\+\_\+pubrec}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+pubrec(struct mqtt\+\_\+client $\ast$client, uint16\+\_\+t packet\+\_\+id)}{__mqtt_pubrec(struct mqtt_client *client, uint16_t packet_id)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t \+\_\+\+\_\+mqtt\+\_\+pubrec (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{uint16\+\_\+t}]{packet\+\_\+id}
\end{DoxyParamCaption}
)}\hypertarget{group__details_ga874c62f7a20b6adf13dbed2b4e2dd985}{}\label{group__details_ga874c62f7a20b6adf13dbed2b4e2dd985}


Acknowledge an ingree publish with Q\+OS==2. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em packet\+\_\+id} & The packet ID of the ingress publish being acknowledged.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+pubrel@{\+\_\+\+\_\+mqtt\+\_\+pubrel}}
\index{\+\_\+\+\_\+mqtt\+\_\+pubrel@{\+\_\+\+\_\+mqtt\+\_\+pubrel}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+pubrel(struct mqtt\+\_\+client $\ast$client, uint16\+\_\+t packet\+\_\+id)}{__mqtt_pubrel(struct mqtt_client *client, uint16_t packet_id)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t \+\_\+\+\_\+mqtt\+\_\+pubrel (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client, }
\item[{uint16\+\_\+t}]{packet\+\_\+id}
\end{DoxyParamCaption}
)}\hypertarget{group__details_ga427f9191ab9967b75e0a7a2f7fa0dca0}{}\label{group__details_ga427f9191ab9967b75e0a7a2f7fa0dca0}


Acknowledge an ingree P\+U\+B\+R\+EC packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em client} & The M\+Q\+TT client. \\
\hline
\mbox{\tt in}  & {\em packet\+\_\+id} & The packet ID of the ingress P\+U\+B\+R\+EC being acknowledged.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily M\+Q\+T\+T\+\_\+\+OK} upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+recv@{\+\_\+\+\_\+mqtt\+\_\+recv}}
\index{\+\_\+\+\_\+mqtt\+\_\+recv@{\+\_\+\+\_\+mqtt\+\_\+recv}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+recv(struct mqtt\+\_\+client $\ast$client)}{__mqtt_recv(struct mqtt_client *client)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t \+\_\+\+\_\+mqtt\+\_\+recv (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client}
\end{DoxyParamCaption}
)}\hypertarget{group__details_ga4d50a465c684a5ecd1c000f811fa601e}{}\label{group__details_ga4d50a465c684a5ecd1c000f811fa601e}


Handles ingress client traffic. 


\begin{DoxyParams}{Parameters}
{\em client} & The M\+Q\+TT client.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\+Q\+T\+T\+\_\+\+OK upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!\+\_\+\+\_\+mqtt\+\_\+send@{\+\_\+\+\_\+mqtt\+\_\+send}}
\index{\+\_\+\+\_\+mqtt\+\_\+send@{\+\_\+\+\_\+mqtt\+\_\+send}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+mqtt\+\_\+send(struct mqtt\+\_\+client $\ast$client)}{__mqtt_send(struct mqtt_client *client)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t \+\_\+\+\_\+mqtt\+\_\+send (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+client} $\ast$}]{client}
\end{DoxyParamCaption}
)}\hypertarget{group__details_gacf553ca88f48350dbde0dc3b96e550f7}{}\label{group__details_gacf553ca88f48350dbde0dc3b96e550f7}


Handles egress client traffic. 


\begin{DoxyParams}{Parameters}
{\em client} & The M\+Q\+TT client.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\+Q\+T\+T\+\_\+\+OK upon success, an \hyperlink{group__api_gad0c901a8d30691ed0ca17915b691b7e7}{M\+Q\+T\+T\+Errors} otherwise. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!mqtt\+\_\+mq\+\_\+clean@{mqtt\+\_\+mq\+\_\+clean}}
\index{mqtt\+\_\+mq\+\_\+clean@{mqtt\+\_\+mq\+\_\+clean}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+mq\+\_\+clean(struct mqtt\+\_\+message\+\_\+queue $\ast$mq)}{mqtt_mq_clean(struct mqtt_message_queue *mq)}}]{\setlength{\rightskip}{0pt plus 5cm}void mqtt\+\_\+mq\+\_\+clean (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+message\+\_\+queue} $\ast$}]{mq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__details_gadb54c413b4d884619c50cc20ee6eb084}{}\label{group__details_gadb54c413b4d884619c50cc20ee6eb084}


Clear as many messages from the front of the queue as possible. 

\begin{DoxyNote}{Note}
Calls to this function are the {\itshape only} way to remove messages from the queue.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em mq} & The message queue. \\
\hline
\end{DoxyParams}
\index{Implementation details@{Implementation details}!mqtt\+\_\+mq\+\_\+find@{mqtt\+\_\+mq\+\_\+find}}
\index{mqtt\+\_\+mq\+\_\+find@{mqtt\+\_\+mq\+\_\+find}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+mq\+\_\+find(struct mqtt\+\_\+message\+\_\+queue $\ast$mq, enum M\+Q\+T\+T\+Control\+Packet\+Type control\+\_\+type, uint16\+\_\+t $\ast$packet\+\_\+id)}{mqtt_mq_find(struct mqtt_message_queue *mq, enum MQTTControlPacketType control_type, uint16_t *packet_id)}}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf mqtt\+\_\+queued\+\_\+message} $\ast$ mqtt\+\_\+mq\+\_\+find (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+message\+\_\+queue} $\ast$}]{mq, }
\item[{enum {\bf M\+Q\+T\+T\+Control\+Packet\+Type}}]{control\+\_\+type, }
\item[{uint16\+\_\+t $\ast$}]{packet\+\_\+id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__details_ga1ffcd45af057865a0d85b4e9e24789a2}{}\label{group__details_ga1ffcd45af057865a0d85b4e9e24789a2}


Find a message in the message queue. 


\begin{DoxyParams}[1]{Parameters}
 & {\em mq} & The message queue. \\
\hline
\mbox{\tt in}  & {\em control\+\_\+type} & The control type of the message you want to find. \\
\hline
\mbox{\tt in}  & {\em packet\+\_\+id} & The packet ID of the message you want to find. Set to {\ttfamily N\+U\+LL} if you don\textquotesingle{}t want to specify a packet ID.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The found message. {\ttfamily N\+U\+LL} if the message was not found. 
\end{DoxyReturn}
\index{Implementation details@{Implementation details}!mqtt\+\_\+mq\+\_\+init@{mqtt\+\_\+mq\+\_\+init}}
\index{mqtt\+\_\+mq\+\_\+init@{mqtt\+\_\+mq\+\_\+init}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+mq\+\_\+init(struct mqtt\+\_\+message\+\_\+queue $\ast$mq, void $\ast$buf, size\+\_\+t bufsz)}{mqtt_mq_init(struct mqtt_message_queue *mq, void *buf, size_t bufsz)}}]{\setlength{\rightskip}{0pt plus 5cm}void mqtt\+\_\+mq\+\_\+init (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+message\+\_\+queue} $\ast$}]{mq, }
\item[{void $\ast$}]{buf, }
\item[{size\+\_\+t}]{bufsz}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__details_ga0da861c969387bf8d0229924543d9bb7}{}\label{group__details_ga0da861c969387bf8d0229924543d9bb7}


Initialize a message queue. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em mq} & The message queue to initialize. \\
\hline
\mbox{\tt in}  & {\em buf} & The buffer for this message queue. \\
\hline
\mbox{\tt in}  & {\em bufsz} & The number of bytes in the buffer. \\
\hline
\end{DoxyParams}
\index{Implementation details@{Implementation details}!mqtt\+\_\+mq\+\_\+register@{mqtt\+\_\+mq\+\_\+register}}
\index{mqtt\+\_\+mq\+\_\+register@{mqtt\+\_\+mq\+\_\+register}!Implementation details@{Implementation details}}
\subsubsection[{\texorpdfstring{mqtt\+\_\+mq\+\_\+register(struct mqtt\+\_\+message\+\_\+queue $\ast$mq, size\+\_\+t nbytes)}{mqtt_mq_register(struct mqtt_message_queue *mq, size_t nbytes)}}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf mqtt\+\_\+queued\+\_\+message} $\ast$ mqtt\+\_\+mq\+\_\+register (
\begin{DoxyParamCaption}
\item[{struct {\bf mqtt\+\_\+message\+\_\+queue} $\ast$}]{mq, }
\item[{size\+\_\+t}]{nbytes}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\hypertarget{group__details_gaa34e6af3ab1af60ebf8fe7b86be868fc}{}\label{group__details_gaa34e6af3ab1af60ebf8fe7b86be868fc}


Register a message that was just added to the buffer. 

\begin{DoxyNote}{Note}
This function should be called immediately following a call to a packer function that returned a positive value. The positive value (number of bytes packed) should be passed to this function.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
 & {\em mq} & The message queue. \\
\hline
\mbox{\tt in}  & {\em nbytes} & The number of bytes that were just packed.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function will step \hyperlink{structmqtt__message__queue_a6fdfd281cd9d9ac4bfa69840e5cbd359}{mqtt\+\_\+message\+\_\+queue\+::curr} and update \hyperlink{structmqtt__message__queue_a0fe32958dfdb1872f040d7f86ca9a4b9}{mqtt\+\_\+message\+\_\+queue\+::curr\+\_\+sz}.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
The newly added struct \hyperlink{structmqtt__queued__message}{mqtt\+\_\+queued\+\_\+message}. 
\end{DoxyReturn}
